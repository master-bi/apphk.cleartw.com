<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>OFA168 - å®‰è£</title>

  <!-- Favicon -->
  <link rel="icon" href="/favicon.ico" sizes="any">
<link rel="icon" type="image/png" href="/favicon.png">

  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text",
                   "Segoe UI", system-ui, sans-serif;
    }

    body {
      background: #050508;
      color: #ffffff;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      padding: 16px;
    }

    .page {
      width: 100%;
      max-width: 480px;
      margin: auto;
    }

    .card {
      background: #101018;
      border-radius: 22px;
      padding: 18px 16px 20px;
      box-shadow: 0 16px 36px rgba(0,0,0,0.75);
      border: 1px solid rgba(255,255,255,0.06);
    }

    .top-row {
      display: flex;
      align-items: center;
      margin-bottom: 16px;
    }

    .icon {
      width: 120px;
      height: 120px;
      border-radius: 16px;
      overflow: hidden;
      margin-right: 14px;
      flex-shrink: 0;
      background: #000000;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 900;
      font-size: 30px;
      color: #1a1204;
    }
    .icon img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .app-main-info { flex: 1; }
    .app-title {
      font-size: 20px;
      font-weight: 600;
      margin-bottom: 4px;
    }
    .app-subtitle {
      font-size: 12px;
      color: #a8afbd;
    }

    .btn-row { margin-top: 10px; }
    .btn {
      width: 100%;
      border-radius: 999px;
      border: none;
      padding: 10px 0;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
    }
    .btn-primary {
      background: #0a84ff;
      color: #ffffff;
    }

    .stats-row {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      margin: 18px 0 16px;
      text-align: center;
      font-size: 11px;
      color: #cfd3dd;
    }
    .stats-item-title {
      font-size: 10px;
      color: #8a92a2;
      margin-bottom: 4px;
    }
    .big-score {
      font-size: 20px;
      font-weight: 600;
    }

    /* ===== App Store é¢¨æ ¼çµ±è¨ˆåˆ—ï¼ˆå°é½Š iOS App Storeï¼‰ ===== */
.stats-row{
  display: grid;
  grid-template-columns: repeat(4,1fr);
  margin: 14px 0 12px;
  padding: 12px 0;
  text-align: center;
  border-top: 1px solid rgba(255,255,255,0.06);
  border-bottom: 1px solid rgba(255,255,255,0.06);
}
.stats-col{
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 4px;
  padding: 2px 6px;
}
/* è±ç·šï¼ˆåªåœ¨ä¸­æ®µï¼Œåƒ App Storeï¼‰ */
.stats-col:not(:last-child)::after{
  content:"";
  position:absolute;
  right:0;
  top:50%;
  transform: translateY(-50%);
  height: 60%;
  width:1px;
  background: rgba(255,255,255,0.12);
}

.stats-top{
  font-size: 11px;
  font-weight: 500;
  color:#9aa0b3;
  line-height: 1;
  margin-bottom: 2px;
  white-space: nowrap;
}

.stats-big{
  font-size: 26px;
  font-weight: 700;
  color:#eef1f8;
  line-height: 1;
  letter-spacing: 0.2px;
  margin-top: 2px;
}

.stats-bottom{
  font-size: 11px;
  font-weight: 500;
  color:#aeb4c2;
  line-height: 1;
  white-space: nowrap;
  margin-top: 2px;
}
.stats-bottom.stars{
  letter-spacing: 1.3px;
  font-size: 12px;
}

@media (max-width:480px){
  .stats-row{ padding: 10px 0; }
  .stats-big{ font-size: 24px; }
  .stats-top,.stats-bottom{ font-size: 10px; }
  .stats-col:not(:last-child)::after{ height: 58%; }
}

.star-line {
      height: 6px;
      border-radius: 999px;
      background: linear-gradient(90deg, #ffcc48 0, #ffcc48 70%, #2b2f3a 70%);
      margin: 6px 0;
    }

    .section { margin-bottom: 18px; }
    .section-title {
      font-size: 15px;
      font-weight: 600;
      margin-bottom: 10px;
    }
    .intro-text {
      font-size: 13px;
      color: #d5dae6;
      line-height: 1.5;
    }

    .rating-block {
      background: #181821;
      border-radius: 16px;
      padding: 12px;
      border: 1px solid rgba(255,255,255,0.06);
    }

    .rating-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }

    .rating-left {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .rating-small-star {
      color: #ffcc48;
      letter-spacing: 1px;
      font-size: 12px;
    }
    .rating-total {
      font-size: 11px;
      color: #8f96a5;
    }

    .review-card {
      margin-top: 10px;
      padding-top: 10px;
      border-top: 1px solid rgba(255,255,255,0.06);
    }

    .review-title-row {
      display: flex;
      justify-content: space-between;
      margin-bottom: 4px;
      font-size: 12px;
    }

    .review-name { font-size: 11px; color: #c2c9d6; }
    .review-text {
      font-size: 11px;
      color: #d5dae6;
      line-height: 1.5;
    }

    .info-list {
      background: #181821;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,0.06);
      padding: 10px 12px;
      font-size: 12px;
    }
    .info-row {
      display: flex;
      justify-content: space-between;
      padding: 6px 0;
      border-bottom: 1px solid rgba(255,255,255,0.04);
    }
    .info-row:last-child { border-bottom: none; }
    .info-label { color: #9aa0b3; }
    .info-value { color: #e1e5f2; }

    .disclaimer {
      font-size: 11px;
      color: #8b93a3;
      margin-top: 8px;
      line-height: 1.5;
    }

    /* ===== æ´»å‹•è¼ªæ’­ï¼ˆä¸»è¼ªæ’­ï¼‰ ===== */
    .app-gallery {
      width: 100%;
      margin: 6px 0;
      padding: 2px 0 6px;
    }

    .app-gallery-viewport { position: relative; width: 100%; overflow-x: visible; overflow-y: visible; padding: 12px 0 4px; }

    .app-gallery-track { display:flex; gap:14px; overflow-x:auto; scroll-behavior:smooth; padding:12px 16px 12px; scroll-padding-left:16px; scroll-padding-right:16px; perspective:1000px; scrollbar-width:none; }
    .app-gallery-track::-webkit-scrollbar { display: none; }

    /* âœ… A å¤§å‹ 1:1 å¡ç‰‡ */
    .app-gallery-card {
      position: relative;
      width: 270px;          /* A å°ºå¯¸ */
      max-width: 68vw;       /* æ‰‹æ©Ÿè‡ªé©æ‡‰ */
      aspect-ratio: 1 / 1;   /* âœ… å¼·åˆ¶æ­£æ–¹å½¢ */
      border-radius: 20px;
      overflow: hidden;
      flex-shrink: 0;
      background: #050508;
      transform: translateY(0) scale(0.97) rotateY(-3deg);
      box-shadow: 0 6px 18px rgba(0,0,0,0.8);
      transition: transform 0.4s ease, box-shadow 0.4s ease, background 0.3s ease, opacity 0.3s ease;
      opacity: 0.85;
    }
    .app-gallery-card.active {
      transform: translateY(-3px) scale(1.04) rotateY(0deg);
      box-shadow: 0 14px 30px rgba(0,0,0,0.95);
      background: #0b0b10;
      opacity: 1;
    }

    /* âœ… ä¸»è¼ªæ’­åª’é«”åœ¨æ–¹å½¢å…§æ»¿ç‰ˆç½®ä¸­è£åˆ‡ */
    .gallery-media {
      display: block;
      width: 100%;
      height: 100%;
      object-fit: cover;         /* âœ… æ»¿ç‰ˆè£åˆ‡ */
      object-position: center;   /* âœ… æ­£ä¸­é–“ */
      border-radius: 20px;
      opacity: 0;
      transition: opacity 0.35s ease;
      cursor: zoom-in;
      background: #000;
    }

    .app-gallery-loader {
      position: absolute;
      inset: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      background: radial-gradient(circle at 20% 20%, rgba(255,255,255,0.06), transparent 55%);
    }
    .app-gallery-loader::after {
      content: "";
      width: 22px; height: 22px;
      border-radius: 50%;
      border: 2px solid rgba(255,255,255,0.1);
      border-top-color: rgba(255,255,255,0.7);
      animation: appGallerySpin 0.8s linear infinite;
    }
    @keyframes appGallerySpin { to { transform: rotate(360deg); } }

    .app-gallery-card.loaded .gallery-media { opacity: 1; }
    .app-gallery-card.loaded .app-gallery-loader {
      opacity: 0; pointer-events: none; transition: opacity 0.25s ease;
    }

    .app-gallery-arrow { display: none !important; }

    .app-gallery-dots {
      text-align: center;
      margin-top: 4px;
    }
    .app-gallery-dots span {
      display: inline-block;
      width: 8px; height: 8px;
      border-radius: 999px;
      background: rgba(255,255,255,0.18);
      margin: 0 3px;
      transition: all 0.25s ease;
    }
    .app-gallery-dots span.active { width: 18px; background: #ffffff; }

    /* ===== å…¨è¢å¹•é è¦½ï¼ˆé¡¯ç¤ºå®Œæ•´æ¯”ä¾‹ï¼‰ ===== */
    .app-gallery-preview {
      position: fixed;
      inset: 0;
      display: none;
      justify-content: center;
      align-items: center;
      background: rgba(0,0,0,0.96);
      z-index: 999;
      touch-action: pan-y;
      padding-bottom: 96px;
    }
    .app-gallery-preview-inner {
      position: relative;
      width: 100%;
      max-width: 100vw;
      max-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      gap: 10px;
    }

    #appGalleryPreviewMedia {
      width: 92vw;
      max-width: 520px;
      max-height: calc(90vh - 120px);
      border-radius: 18px;
      box-shadow: 0 18px 40px rgba(0,0,0,1);
      background: #000;
    }
    #appGalleryPreviewMedia video,
    #appGalleryPreviewMedia img {
      width: 100%;
      height: auto;
      max-height: calc(90vh - 120px);
      border-radius: 18px;
      display: block;
    }

    .preview-arrow { display: none !important; }

    .preview-close {
      position: fixed;
      top: 8px;
      right: 8px;
      width: 38px; height: 38px;
      border-radius: 50%;
      border: none;
      font-size: 22px;
      cursor: pointer;
      background: rgba(255,255,255,0.12);
      color: #fff;
      display: flex; align-items: center; justify-content: center;
      backdrop-filter: blur(8px);
      box-shadow: 0 2px 10px rgba(0,0,0,0.9);
      z-index: 1002;
    }

    .preview-thumbs {
      position: fixed;
      left: 0; right: 0; bottom: 0;
      height: 92px;
      padding: 14px 10px 12px;
      display: flex;
      align-items: center;
      gap: 8px;
      overflow-x: auto;
      overflow-y: visible;
      background: linear-gradient(180deg, rgba(0,0,0,0), rgba(0,0,0,0.9));
      backdrop-filter: blur(6px);
      z-index: 1000;
      scrollbar-width: none;
    }
    .preview-thumbs::-webkit-scrollbar { display: none; }

    .preview-thumb {
      width: 56px;
      height: 56px;
      border-radius: 10px;
      overflow: hidden;
      flex-shrink: 0;
      opacity: 0.6;
      transform: scale(0.96);
      transition: opacity 0.2s ease, transform 0.2s ease, box-shadow 0.2s ease;
      border: 1px solid rgba(255,255,255,0.08);
      cursor: pointer;
      background: #0b0b10;
      margin-top: 2px;
      position: relative;
    }
    .preview-thumb video,
    .preview-thumb img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
      border-radius: 10px;
      background: #000;
    }
    .preview-thumb.active {
      opacity: 1;
      transform: scale(1.06);
      box-shadow: 0 0 0 2px rgba(255,255,255,0.9);
      border-color: transparent;
    }

    @media (max-width: 480px) {
      .app-gallery-card {
        width: 252px;   /* æ‰‹æ©Ÿç•¥ç¸®ä½†ä»æ˜¯ A å¤§æ„Ÿ */
        max-width: 82vw;
      }
      .preview-thumbs {
        height: 84px;
        padding-top: 12px;
      }
      .preview-thumb { width: 50px; height: 50px; }
      .preview-close { top: 6px; right: 6px; }
    }
  
.stats-col:last-child{
  border-right:none;
}



/* ===== å…è²»å®‰è£æŒ‰éˆ• loadingï¼ˆè½‰åœˆ + 2 ç§’å¾Œè·³è½‰ï¼‰ ===== */
.btn-primary.loading {
  position: relative;
  color: transparent !important; /* éš±è—åŸæ–‡å­— */
  pointer-events: none;
  opacity: 0.95;
}
.btn-primary.loading::after {
  content: "";
  position: absolute;
  top: 50%;
  left: 50%;
  width: 18px;
  height: 18px;
  margin: -9px 0 0 -9px;
  border: 2px solid rgba(255,255,255,0.35);
  border-top-color: #fff;
  border-radius: 50%;
  animation: installSpin 0.8s linear infinite;
}
@keyframes installSpin { to { transform: rotate(360deg); } }

    .intro-toggle {
      margin-top: 6px;
      font-size: 13px;
      color: #0a84ff;
      cursor: pointer;
      user-select: none;
    }





/* ===== ç°¡ä»‹å±•é–‹/æ”¶åˆï¼ˆB ç‰ˆï¼šä¿ç•™æ®µè½èˆ‡ 1.2.3.ï¼‰ ===== */
.intro-paragraphs p{
  margin: 0 0 8px;
}
.intro-paragraphs p:last-child{
  margin-bottom: 0;
}
#introBox.intro-collapsed #introText {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}
.intro-toggle {
  margin-top: 6px;
  font-size: 13px;
  color: #0a84ff;
  cursor: pointer;
  user-select: none;
}


/* LINE æŒ‰éˆ• */
.line-btn{
  display: inline-block;
  padding: 2px 8px;
  border-radius: 999px;
  background: rgba(10,132,255,0.16);
  color: #0a84ff;
  text-decoration: none;
  font-weight: 600;
  font-size: 13px;
  border: 1px solid rgba(10,132,255,0.35);
  vertical-align: middle;
}
.line-btn:active{
  transform: translateY(1px);
}







/* é è¦½ç¶­æŒåŸå§‹æ¯”ä¾‹ï¼ˆä¸å£“æ‰ï¼‰ */
/* ç²¾é¸æ¨™é¡Œä¸Šæ–¹å¤šç•™ç™½ï¼Œé¿å…é»åˆ°æŸ¥çœ‹æ›´å¤š */
.section.featured-section{ margin-top: 14px; }
.section.featured-section .section-title{ margin-top: 0; }


/* ===== ç¬¬äºŒè¼ªæ’­ï¼ˆç²¾é¸ / ç›´ç‰ˆ 9:16 / æ»¿ç‰ˆè£åˆ‡ A ç‰ˆï¼‰===== */
.app-gallery-card.second{
  width: 260px;
  max-width: 64vw;
  aspect-ratio: 9 / 16;   /* âœ… ç›´ç‰ˆ 9:16 */
  border-radius: 18px;
  overflow: hidden;
  background: #050508;
}
.gallery-media.second{
  width:100%;
  height:100%;
  object-fit: cover;      /* âœ… æ»¿ç‰ˆè£åˆ‡ */
  object-position: center;
  border-radius: 18px;
  background:#000;
}

/* é è¦½ï¼šä¸è£åˆ‡é¿å…è®Šå½¢ */
#appGalleryPreviewMedia2{
  width: 92vw;
  max-width: 520px;
  max-height: calc(90vh - 120px);
  border-radius: 18px;
  box-shadow: 0 18px 40px rgba(0,0,0,1);
  background: #000;
}
#appGalleryPreviewMedia2 video,
#appGalleryPreviewMedia2 img{
  width: 100%;
  height: auto;
  max-height: calc(90vh - 120px);
  object-fit: contain;
  border-radius: 18px;
  display:block;
  background:#000;
}

/* ç²¾é¸æ¨™é¡Œä¸Šæ–¹ç•™ç™½ï¼Œé¿å…é»åˆ°æŸ¥çœ‹æ›´å¤š */
.section.featured-section{ margin-top: 14px; }


/* ===== æ¨è–¦å€ï¼ˆä½ å¯èƒ½ä¹Ÿæœƒå–œæ­¡ï¼‰+ æŸ¥çœ‹æŒ‰éˆ• ===== */
.recommend-section{ margin-top:20px; }
.recommend-list{ display:flex; flex-direction:column; gap:12px; margin-top:12px; }
.recommend-item{
  display:flex;
  align-items:center;
  justify-content:space-between;
  background:#111218;
  border-radius:18px;
  padding:12px;
  box-shadow: 0 6px 18px rgba(0,0,0,0.55);
  border:1px solid rgba(255,255,255,0.06);
}
.recommend-left{ display:flex; align-items:center; gap:12px; }
.recommend-icon{
  width:64px; height:64px;
  border-radius:16px;
  object-fit:cover;
  background:#000;
  flex-shrink:0;
}
.recommend-title{ font-size:17px; font-weight:600; }
.recommend-btn{ font-size:13px; padding:2px 10px; } /* æ²¿ç”¨ line-btn é¢¨æ ¼ï¼Œå¾®èª¿å¯¬ */
/* ===== iOS-like depth glow (NO glass/backdrop-filter) ===== */
.card{
  box-shadow:
    0 18px 40px rgba(0,0,0,0.85),
    0 0 0 1px rgba(255,255,255,0.07),
    inset 0 1px 0 rgba(255,255,255,0.04);
}

.rating-block,
.info-list{
  box-shadow:
    0 10px 22px rgba(0,0,0,0.75),
    0 0 0 1px rgba(255,255,255,0.06),
    inset 0 1px 0 rgba(255,255,255,0.035);
  border-color: rgba(255,255,255,0.08) !important;
}

.app-gallery-card{
  box-shadow:
    0 10px 26px rgba(0,0,0,0.9),
    0 0 0 1px rgba(255,255,255,0.06),
    inset 0 1px 0 rgba(255,255,255,0.04);
}

.app-gallery-card.active{
  box-shadow:
    0 18px 36px rgba(0,0,0,0.95),
    0 0 0 1px rgba(255,255,255,0.10),
    0 0 18px rgba(255,255,255,0.08),
    inset 0 1px 0 rgba(255,255,255,0.06);
}

.app-gallery-dots span.active{
  box-shadow: 0 0 10px rgba(255,255,255,0.55);
}

.btn-primary{
  box-shadow:
    0 8px 18px rgba(10,132,255,0.35),
    inset 0 1px 0 rgba(255,255,255,0.25);
}

.line-btn{
  box-shadow:
    0 6px 14px rgba(10,132,255,0.25),
    inset 0 1px 0 rgba(255,255,255,0.18);
}

.recommend-item img{
  box-shadow:
    0 8px 18px rgba(0,0,0,0.8),
    0 0 0 1px rgba(255,255,255,0.06),
    inset 0 1px 0 rgba(255,255,255,0.04);
}


/* ===== åªè§£æ”¾ã€Œä¸‹é¢è¼ªæ’­åœ–(ç¬¬äºŒè¼ªæ’­)ã€è¶…å‡ºè£åˆ‡ï¼Œä¸å‹•å…¶ä»– ===== */
.app-gallery-viewport.second{
  overflow: visible !important; /* å…è¨±å¡ç‰‡æ”¾å¤§è¶…å‡º */
}
.app-gallery-track.second{
  overflow-y: visible !important; /* é˜²æ­¢ä¸Šç·£è¢«è£åˆ‡ */
  padding-top: 14px !important;   /* çµ¦ active æ”¾å¤§ç•™ç©ºé–“ */
  padding-bottom: 14px !important;
}


    /* ===== å®‰è£æŒ‰éˆ• + åœ‹å®¶ä¸‹æ‹‰ï¼ˆåªæ–°å¢ï¼Œä¸å½±éŸ¿å…¶å®ƒï¼‰ ===== */
    .install-row{
      display:flex;
      align-items:center;
      gap:10px;
      margin-top: 2px;
    }
    .install-row .btn-primary{
      flex: 1;              /* è®“å·¦é‚Šè®ŠçŸ­ï¼Œå³é‚Šç•™çµ¦åœ‹æ—— */
      min-width: 0;
    }

    .region-select{
      position: relative;
      flex-shrink: 0;
    }
    .btn-region{
      width: 70px;
      padding: 10px 0;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(255,255,255,0.06); /* æ¥è¿‘åº•è‰²çš„åŠé€æ˜ */
      color:#fff;
      font-size: 18px;
      font-weight: 600;
      cursor:pointer;
      box-shadow: 0 6px 14px rgba(0,0,0,0.55) inset, 0 4px 10px rgba(0,0,0,0.6);
      backdrop-filter: none; /* ä¸ç”¨ç»ç’ƒå¥—ä»¶ */
    }
    .btn-region:active{ transform: translateY(1px); }

    .region-menu{
      position:absolute;
      top: calc(100% + 8px);
      right:0;
      width: 170px;
      background: #0f0f16;
      border: 1px solid rgba(255,255,255,0.10);
      border-radius: 14px;
      box-shadow: 0 18px 40px rgba(0,0,0,0.9);
      padding: 6px;
      display:none;
      z-index: 50;
    }
    .region-select.open .region-menu{ display:block; }

    .region-option{
      display:flex;
      align-items:center;
      gap:8px;
      padding: 8px 10px;
      border-radius: 10px;
      font-size: 14px;
      color:#e9ecf6;
      cursor:pointer;
      user-select:none;
    }
    .region-option:hover{
      background: rgba(255,255,255,0.06);
    }
    .region-option .flag{ font-size: 18px; }

</style>
</head>
<body>
  <div class="page">
    <div class="card">
      <!-- ä¸ŠåŠéƒ¨ï¼šicon + åç¨± + æŒ‰éˆ• -->
      <div class="top-row">
        <div class="icon">
          <img src="icons/icon.png" alt="App Icon">
        </div>
        <div class="app-main-info">
          <div class="app-title">OFA168</div>
          <div class="app-subtitle">é«˜å“è³ªéŠæˆ²é«”é©—ï¼Œç«‹å³å®‰è£</div>
          <div class="btn-row">
            <div class="install-row">
              <button class="btn btn-primary" id="install-btn">å…è²»å®‰è£</button>

              <div class="region-select" id="regionSelect">
                <button class="btn btn-region" id="regionBtn" aria-haspopup="listbox" aria-expanded="false">
                  <span id="regionFlag">ğŸ‡­ğŸ‡°</span>
                </button>
                <div class="region-menu" id="regionMenu" role="listbox" aria-label="é¸æ“‡åœ°å€">
                  <div class="region-option" data-region="hk" data-url="/pwa/index.html">
                    <span class="flag">ğŸ‡­ğŸ‡°</span><span class="name">é¦™æ¸¯</span>
                  </div>
                  <div class="region-option" data-region="my" data-url="/pwa/indexmy.html">
                    <span class="flag">ğŸ‡²ğŸ‡¾</span><span class="name">é¦¬ä¾†è¥¿äº</span>
                  </div>
                  <div class="region-option" data-region="kh" data-url="/pwa/indexkh.html">
                    <span class="flag">ğŸ‡°ğŸ‡­</span><span class="name">æŸ¬åŸ”å¯¨</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

<!-- ä¸­é–“çµ±è¨ˆæ•¸æ“šï¼ˆApp Store é¢¨æ ¼ï¼‰ -->
<div class="stats-row" id="statsRow">
  <div class="stats-col">
    <div class="stats-top" data-key="ratingsCountTop">2.3è¬å‰‡è©•åˆ†</div>
    <div class="stats-big" data-key="ratingValue">4.9</div>
    <div class="stats-bottom stars" data-key="starsText">â˜…â˜…â˜…â˜…â˜…</div>
  </div>

  <div class="stats-col">
    <div class="stats-top">å¹´é½¡</div>
    <div class="stats-big" data-key="ageValue">18+</div>
    <div class="stats-bottom">æ­²</div>
  </div>

  <div class="stats-col">
    <div class="stats-top">æ’è¡Œæ¦œ</div>
    <div class="stats-big" data-key="rankValue">#1</div>
    <div class="stats-bottom">æ‡‰ç”¨</div>
  </div>

  <div class="stats-col">
    <div class="stats-top">å¤§å°</div>
    <div class="stats-big" data-key="sizeValue">1.40</div>
    <div class="stats-bottom" data-key="sizeUnit">MB</div>
  </div>
</div>

<div class="section">
        <div class="section-title">æ´»å‹•</div>

        <div class="app-gallery">
          <div class="app-gallery-viewport">
            <div class="app-gallery-track" id="appGalleryTrack">
              <div class="app-gallery-card active">
                <div class="app-gallery-loader"></div>
                <video class="gallery-media" data-src="/video/101.mp4" preload="metadata" muted playsinline></video>
              </div>
              <div class="app-gallery-card">
                <div class="app-gallery-loader"></div>
                <video class="gallery-media" data-src="/video/102.mp4" preload="none" muted playsinline></video>
              </div>
              <div class="app-gallery-card">
                <div class="app-gallery-loader"></div>
                <video class="gallery-media" data-src="/video/103.mp4" preload="none" muted playsinline></video>
              </div>
              <div class="app-gallery-card">
                <div class="app-gallery-loader"></div>
                <video class="gallery-media" data-src="/video/104.mp4" preload="none" muted playsinline></video>
              </div>
              <div class="app-gallery-card">
                <div class="app-gallery-loader"></div>
                <video class="gallery-media" data-src="/video/105.mp4" preload="none" muted playsinline></video>
              </div>
              <div class="app-gallery-card">
                <div class="app-gallery-loader"></div>
                <video class="gallery-media" data-src="/video/106.mp4" preload="none" muted playsinline></video>
              </div>
              <div class="app-gallery-card">
                <div class="app-gallery-loader"></div>
                <video class="gallery-media" data-src="/video/107.mp4" preload="none" muted playsinline></video>
              </div>
              <div class="app-gallery-card">
                <div class="app-gallery-loader"></div>
                <video class="gallery-media" data-src="/video/108.mp4" preload="none" muted playsinline></video>
              </div>
            </div>

            <div class="app-gallery-dots" id="appGalleryDots"></div>

<!-- å…¨è¢å¹•é è¦½ï¼ˆæœ‰è² autoplay + controlsï¼‰ -->
<div class="app-gallery-preview" id="appGalleryPreview">
  <div class="app-gallery-preview-inner">
    <button class="preview-close" id="previewClose" aria-label="é—œé–‰">âœ•</button>
    <div id="appGalleryPreviewMedia"></div>
  </div>
</div>

<!-- ç¸®åœ–åˆ—ï¼ˆJS è‡ªå‹•å¡å½±ç‰‡ç¸®åœ–ï¼‰ -->
<div class="preview-thumbs" id="previewThumbs" style="display:none;"></div>
          </div>
        </div>

<!-- ç°¡ä»‹ -->
      <div class="section">
        <div class="section-title">ç°¡ä»‹</div>

        <div id="introBox" class="intro-collapsed">
          <div id="introText" class="intro-text intro-paragraphs">
            <p>1. OFA168éŠæˆ²å¹³å°æ·±è€•äºå¤ªå¸‚å ´å¤šå¹´ï¼Œçµåˆå°ˆæ¥­ç ”ç™¼èˆ‡é ‚å°–å®¢æœï¼Œè‡´åŠ›æ‰“é€ æœ€å®‰å…¨ã€æœ€ç©©å®šçš„ç·šä¸Šå¨›æ¨‚ç’°å¢ƒã€‚</p>
<p>2. å¹³å°æ‰€æœ‰éŠæˆ²é€šé TST èˆ‡ GLI åœ‹éš›æ¸¬è©¦ï¼Œç¢ºä¿å…¬å¹³ã€å…¬æ­£ã€é€æ˜çš„é‹ä½œæ©Ÿåˆ¶ã€‚</p>
<p>3. å…§å®¹åŒ…å«çœŸäººç™¾å®¶ã€æ£‹ç‰Œã€é›»å­è€è™æ©Ÿã€é«”è‚²é›»ç«¶ã€å½©ç¥¨ç­‰å¤šå…ƒéŠæˆ²ï¼Œæä¾›å¦‚è‡¨ç¾å ´èˆ¬çš„æ²‰æµ¸å¼é«”é©—ã€‚</p>
<p>4. æ¡ç”¨åœ‹éš›èªå¯çš„äº‚æ•¸æŠ€è¡“ï¼ˆRNGï¼‰ï¼Œç¢ºä¿æ¯ä¸€å±€éƒ½å…¬å¹³ç„¡èª¤ï¼Œè®“ç©å®¶å®‰å¿ƒäº«å—å¨›æ¨‚ã€‚</p>
<p>5. å…¨å¹´ç„¡ä¼‘ 24 å°æ™‚å®¢æœæ”¯æ´ï¼Œä¸¦å®šæœŸæ¨å‡ºæœƒå“¡å°ˆå±¬å„ªæƒ ã€‚OFA168ä»¥æœå‹™ç‚ºæ ¸å¿ƒï¼Œè‡´åŠ›å¸¶çµ¦ç©å®¶æœ€å°Šæ¦®ã€æœ€è²¼å¿ƒçš„å¨›æ¨‚é«”é©—ã€‚</p>
<p>å–å¾—è¯ç¹«Telegram : <a class="line-btn" href="https://t.me/gm5858168" target="_blank" rel="noopener">@gm5858168</a></p>
          </div>
        
        <div id="introToggle" class="intro-toggle">æ›´å¤š</div>
      </div>

<!-- ç¬¬äºŒè¼ªæ’­ï¼ˆç²¾é¸ / ç›´ç‰ˆ 6:19ï¼‰ -->
      <div class="section featured-section">
        <div class="section-title">ç²¾é¸</div>

        <div class="app-gallery">
          <div class="app-gallery-viewport second">
            <div class="app-gallery-track second" id="appGalleryTrack2">

              <div class="app-gallery-card second">
                <div class="app-gallery-loader"></div>
                <video class="gallery-media second" data-src="/video/201.mp4" preload="metadata" muted playsinline></video>
              </div>

              <div class="app-gallery-card second">
                <div class="app-gallery-loader"></div>
                <video class="gallery-media second" data-src="/video/202.mp4" preload="none" muted playsinline></video>
              </div>

              <div class="app-gallery-card second">
                <div class="app-gallery-loader"></div>
                <video class="gallery-media second" data-src="/video/203.mp4" preload="none" muted playsinline></video>
              </div>

              <div class="app-gallery-card second">
                <div class="app-gallery-loader"></div>
                <video class="gallery-media second" data-src="/video/204.mp4" preload="none" muted playsinline></video>
              </div>

              <div class="app-gallery-card second">
                <div class="app-gallery-loader"></div>
                <video class="gallery-media second" data-src="/video/205.mp4" preload="none" muted playsinline></video>
              </div>

              <div class="app-gallery-card second">
                <div class="app-gallery-loader"></div>
                <video class="gallery-media second" data-src="/video/206.mp4" preload="none" muted playsinline></video>
              </div>

              <div class="app-gallery-card second">
                <div class="app-gallery-loader"></div>
                <video class="gallery-media second" data-src="/video/207.mp4" preload="none" muted playsinline></video>
              </div>

              <div class="app-gallery-card second">
                <div class="app-gallery-loader"></div>
                <video class="gallery-media second" data-src="/video/208.mp4" preload="none" muted playsinline></video>
              </div>

            </div>
            <div class="app-gallery-dots second" id="appGalleryDots2"></div>
          </div>
        </div>

        
      </div>

<!-- è©•åˆ†åŠè©•è«– -->
<div class="section">
  <div class="section-title">è©•åˆ†åŠè©•è«–</div>
  <div class="rating-block">
    <div class="rating-header">
      <div class="rating-left">
        <span class="big-score">4.9</span>
        <span class="rating-small-star">â˜…â˜…â˜…â˜…â˜…</span>
        <span class="rating-total">æ»¿åˆ† 5 åˆ†ï¼2.3è¬å‰‡è©•åˆ†</span>
      </div>
      <div style="flex:1; margin-left:12px;">
        <div class="star-line"></div>
      </div>
    </div>

    <div class="review-card">
  <div class="review-title-row">
    <span>Lots of game options to choose from</span>
    <span class="review-date" data-offset="1">--</span>
  </div>
  <div style="font-size:11px;color:#ffcc48;margin-bottom:4px;">â˜…â˜…â˜…â˜…â˜…</div>
  <div class="review-name">Rose</div>
  <div class="review-text" style="margin-top:4px;">
    There are many different games available, so it never gets boring. Perfect for quick entertainment anytime.
  </div>
</div>

<div class="review-card">
  <div class="review-title-row">
    <span>ä¼‘é–’æ”¾é¬†çš„å¥½åœ°æ–¹</span>
    <span class="review-date" data-offset="2">--</span>
  </div>
  <div style="font-size:11px;color:#ffcc48;margin-bottom:4px;">â˜…â˜…â˜…â˜…â˜…</div>
  <div class="review-name">å°ç¥</div>
  <div class="review-text" style="margin-top:4px;">
    ä¸‹ç­å¾Œèººåœ¨åºŠä¸Šç©ä¸€ä¸‹å‰›å‰›å¥½ï¼ŒéŠæˆ²ç¯€å¥ä¸æœƒå¤ªç·Šå¼µï¼Œå¯ä»¥æ”¾é¬†å¿ƒæƒ…ã€‚
  </div>
</div>

<div class="review-card">
  <div class="review-title-row">
    <span>Fast support and reliable service</span>
    <span class="review-date" data-offset="3">--</span>
  </div>
  <div style="font-size:11px;color:#ffcc48;margin-bottom:4px;">â˜…â˜…â˜…â˜…â˜…</div>
  <div class="review-name">Dolly</div>
  <div class="review-text" style="margin-top:4px;">
    Customer support responds quickly and helps solve issues right away. Feels trustworthy and well-managed.
  </div>
</div>
  </div>
</div>


      

        <div class="app-gallery-preview" id="appGalleryPreview2">
          <div class="app-gallery-preview-inner">
            <button class="preview-close" id="previewClose2" aria-label="é—œé–‰">âœ•</button>
            <div id="appGalleryPreviewMedia2"></div>
          </div>
        </div>

        <div class="preview-thumbs" id="previewThumbs2" style="display:none;"></div>
      </div>



    

<div class="section">
        <div class="section-title">è³‡è¨Š</div>
        <div class="info-list">
          <div class="info-row">
            <span class="info-label">ä¾›æ‡‰å•†</span>
            <span class="info-value">OFA168</span>
          </div>
          <div class="info-row">
            <span class="info-label">å®‰è£åŒ…å¤§å°</span>
            <span class="info-value">1.4M</span>
          </div>
          <div class="info-row">
            <span class="info-label">ç‰ˆæœ¬</span>
            <span class="info-value">V3.0.1</span>
          </div>
          <div class="info-row">
            <span class="info-label">å…¼å®¹æ€§</span>
            <span class="info-value">iOS 9.0 æˆ–æ›´é«˜ç‰ˆæœ¬</span>
          </div>
          <div class="info-row">
            <span class="info-label">èªè¨€</span>
            <span class="info-value">ç¹é«”ä¸­æ–‡</span>
          </div>
          <div class="info-row">
            <span class="info-label">å¹´é½¡åˆ†ç´š</span>
            <span class="info-value">é™ 18 æ­²ä»¥ä¸Š</span>
          </div>
          <div class="info-row">
            <span class="info-label">åƒ¹æ ¼</span>
            <span class="info-value">å…è²»</span>
          </div>
        </div>

        
<div class="recommend-section">
  <div class="section-title">ä½ å¯èƒ½ä¹Ÿæœƒå–œæ­¡</div>
  <div class="recommend-list">
    <div class="recommend-item">
      <div class="recommend-left">
        <img src="/recommend/001.png" class="recommend-icon" alt="å¤§è€çˆºéŠæˆ²åŸ">
        <div class="recommend-title">å¤§è€çˆºéŠæˆ²åŸ</div>
      </div>
      <a class="line-btn recommend-btn" href="https://gmapp.cleartw.com" target="_blank" rel="noopener">æŸ¥çœ‹</a>
    </div>

    <div class="recommend-item">
      <div class="recommend-left">
        <img src="/recommend/002.png" class="recommend-icon" alt="8æ–¹éŠæˆ²åŸ">
        <div class="recommend-title">8æ–¹éŠæˆ²åŸ</div>
      </div>
      <a class="line-btn recommend-btn" href="https://app178.cleartw.com" target="_blank" rel="noopener">æŸ¥çœ‹</a>
    </div>

    <div class="recommend-item">
      <div class="recommend-left">
        <img src="/recommend/003.png" class="recommend-icon" alt="é›„åšéŠæˆ²åŸ">
        <div class="recommend-title">é›„åšéŠæˆ²åŸ</div>
      </div>
      <a class="line-btn recommend-btn" href="https://app918.cleartw.com" target="_blank" rel="noopener">æŸ¥çœ‹</a>
    </div>
  </div>
</div>

      </div>
    </div>

</div>
  </div>

      </div>
    </div>

</div>
  </div>

<script>
  /* ===== å®‰è£æŒ‰éˆ• + åœ°å€ä¸‹æ‹‰ï¼ˆåªæ–°å¢åŠŸèƒ½ï¼‰ ===== */
  const REGION_CONFIG = {
    hk: { flag: "ğŸ‡­ğŸ‡°", name: "é¦™æ¸¯", url: "/pwa/index.html" },
    my: { flag: "ğŸ‡²ğŸ‡¾", name: "é¦¬ä¾†è¥¿äº", url: "/pwa/indexmy.html" },
    kh: { flag: "ğŸ‡°ğŸ‡­", name: "æŸ¬åŸ”å¯¨", url: "/pwa/indexkh.html" }
  };
  let currentRegion = "hk"; // é è¨­é¦™æ¸¯

  const btn = document.getElementById('install-btn');
  const regionSelect = document.getElementById('regionSelect');
  const regionBtn = document.getElementById('regionBtn');
  const regionFlagEl = document.getElementById('regionFlag');
  const regionMenu = document.getElementById('regionMenu');

  function setRegion(key){
    if (!REGION_CONFIG[key]) return;
    currentRegion = key;
    regionFlagEl.textContent = REGION_CONFIG[key].flag;
    regionBtn.setAttribute("aria-expanded", "false");
    regionSelect.classList.remove("open");
  }

  // ä¸‹æ‹‰é–‹/é—œ
  regionBtn.addEventListener('click', (e)=>{
    e.stopPropagation();
    const open = regionSelect.classList.toggle('open');
    regionBtn.setAttribute("aria-expanded", open ? "true" : "false");
  });

  // é¸é …é»æ“Š
  regionMenu.querySelectorAll('.region-option').forEach(opt=>{
    opt.addEventListener('click', (e)=>{
      e.stopPropagation();
      setRegion(opt.getAttribute('data-region'));
    });
  });

  // é»å¤–é¢é—œé–‰
  document.addEventListener('click', ()=>{
    regionSelect.classList.remove('open');
    regionBtn.setAttribute("aria-expanded", "false");
  });

  // å®‰è£æŒ‰éˆ•ï¼šè½‰åœˆ 2 ç§’å¾Œä¾åœ°å€è·³è½‰
  btn.addEventListener('click', () => {
    if (btn.classList.contains('loading')) return;

    btn.classList.add('loading');
    btn.textContent = "å®‰è£ä¸­â€¦";

    const installUrl = REGION_CONFIG[currentRegion].url;

    setTimeout(() => {
      window.location.href = installUrl;
    }, 2000);
  });
</script>

<script>
  /* ===== Stats å¯é…ç½®å€ï¼ˆæ”¹é€™è£¡å°±æœƒè‡ªå‹•æ›´æ–°é¡¯ç¤ºï¼‰ ===== */
  const STATS_CONFIG = {
    ratingsCount: 2.3,
    ratingValue: 4.9,        // 0~5
    stars: 5,                // 0~5
    ageValue: "18+",
    rankValue: "#2",
    sizeValue: 1.40,
    sizeUnit: "MB"
  };

  (function renderStats(){
    const fmtCount = (n)=> {
      try { return Number(n).toLocaleString('zh-Hant'); } catch(e){ return n; }
    };
    const starsText = "â˜…â˜…â˜…â˜…â˜…".slice(0, STATS_CONFIG.stars).padEnd(5, "â˜†");

    document.querySelectorAll('[data-key="ratingsCountTop"]').forEach(el=>{
      el.textContent = `${fmtCount(STATS_CONFIG.ratingsCount)}è¬å‰‡è©•åˆ†`;
    });
    document.querySelectorAll('[data-key="ratingValue"]').forEach(el=>{
      el.textContent = STATS_CONFIG.ratingValue;
    });
    document.querySelectorAll('[data-key="starsText"]').forEach(el=>{
      el.textContent = starsText;
    });
    document.querySelectorAll('[data-key="ageValue"]').forEach(el=>{
      el.textContent = STATS_CONFIG.ageValue;
    });
    document.querySelectorAll('[data-key="rankValue"]').forEach(el=>{
      el.textContent = STATS_CONFIG.rankValue;
    });
    document.querySelectorAll('[data-key="sizeValue"]').forEach(el=>{
      el.textContent = STATS_CONFIG.sizeValue;
    });
    document.querySelectorAll('[data-key="sizeUnit"]').forEach(el=>{
      el.textContent = STATS_CONFIG.sizeUnit;
    });
  })();
</script>

<script>
    (function () {
      const track = document.getElementById('appGalleryTrack');
      if (!track) return;

      const cards = Array.from(track.querySelectorAll('.app-gallery-card'));
      const medias = cards.map(c => c.querySelector('.gallery-media'));
      const dotsBox = document.getElementById('appGalleryDots');

      const preview = document.getElementById('appGalleryPreview');
      const previewMediaBox = document.getElementById('appGalleryPreviewMedia');
      const previewClose = document.getElementById('previewClose');
      const previewThumbs = document.getElementById('previewThumbs');

      let current = 0;
      let autoTimer = null;
      let isProgrammaticScroll = false;
      let isPreviewOpen = false;

      let previewIndex = 0;
      let touchStartX = 0;
      let touchEndX = 0;

      // dots
      cards.forEach((_, i) => {
        const dot = document.createElement('span');
        if (i === 0) dot.classList.add('active');
        dot.addEventListener('click', () => goTo(i, true));
        dotsBox.appendChild(dot);
      });
      const dots = Array.from(dotsBox.querySelectorAll('span'));

      // lazy load (img + video)
      const io = 'IntersectionObserver' in window
        ? new IntersectionObserver((entries) => {
            entries.forEach(entry => {
              if (!entry.isIntersecting) return;
              const card = entry.target;
              const media = card.querySelector('img, video');
              const dataSrc = media.getAttribute('data-src');
              if (dataSrc && !media.src) media.src = dataSrc;

              if (media.tagName === 'VIDEO') {
                media.load();
                media.addEventListener('loadedmetadata', () => {
                  try { media.currentTime = 0.05; } catch(e){}
                }, { once: true });
              }

              io.unobserve(card);
            });
          }, { root: track, threshold: 0.2 })
        : null;

      cards.forEach((card) => {
        const media = card.querySelector('img, video');

        if (io) io.observe(card);
        else {
          const dataSrc = media.getAttribute('data-src');
          if (dataSrc && !media.src) media.src = dataSrc;
          if (media.tagName === 'VIDEO') media.load();
        }

        const markLoaded = () => card.classList.add('loaded');
        if (media.tagName === 'VIDEO') {
          media.addEventListener('loadeddata', markLoaded);
          media.addEventListener('error', markLoaded);
        } else {
          if (media.complete && media.naturalWidth !== 0) markLoaded();
          else {
            media.addEventListener('load', markLoaded);
            media.addEventListener('error', markLoaded);
          }
        }

        media.addEventListener('click', (e) => {
          e.stopPropagation();
          if (!media.src) return;
          openPreview(cards.indexOf(card));
        });
      });

      function updateActive(index) {
        cards.forEach((c, i) => c.classList.toggle('active', i === index));
        dots.forEach((d, i) => d.classList.toggle('active', i === index));
      }

      function scrollToCard(index) {
        const card = cards[index];
        if (!card) return;
        const left = card.offsetLeft - track.offsetLeft - 10;
        isProgrammaticScroll = true;
        track.scrollTo({ left, behavior: 'smooth' });
        setTimeout(() => { isProgrammaticScroll = false; }, 450);
      }

      // ä¸»è¼ªæ’­åªæ’­ç•¶å‰å½±ç‰‡ï¼ˆmuted loopï¼‰
      function pauseAllVideos(exceptIndex=null) {
  medias.forEach((m, i) => {
    if (m && m.tagName === 'VIDEO' && i !== exceptIndex) {
      try { m.pause(); } catch(e){}
      // ä¸é‡ç½®æ™‚é–“ï¼Œé¿å…é‡è§£ç¢¼é€ æˆå¡é “/ç™¼ç‡™
      m.muted = true;
    }
  });
}

function ensureVideoSrc(video) {
  if (!video.src) {
    const dataSrc = video.getAttribute('data-src');
    if (dataSrc) {
      video.src = dataSrc;
      // åª load ä¸€æ¬¡ï¼Œé¿å…åè¦† load
      try { video.load(); } catch(e){}
    }
  }
}

      function ensureVideoSrc(video) {
        if (!video.src) {
          const dataSrc = video.getAttribute('data-src');
          if (dataSrc) {
            video.src = dataSrc;
            video.load();
          }
        }
      }

      function playActiveMedia(index) {
  if (isPreviewOpen) return;

  pauseAllVideos(index);

  const media = medias[index];
  if (!media) return;

  if (media.tagName === 'VIDEO') {
    ensureVideoSrc(media);

    media.muted = true;
    media.playsInline = true;
    media.loop = true;

    const tryPlay = () => {
      const p = media.play();
      if (p && typeof p.catch === 'function') p.catch(()=>{});
    };

    if (media.readyState >= 2) {
      tryPlay();
    } else {
      media.addEventListener('canplay', tryPlay, { once: true });
    }
  }
}

      function goTo(index, fromUser) {
        if (index < 0) index = cards.length - 1;
        if (index >= cards.length) index = 0;
        current = index;

        updateActive(current);
        scrollToCard(current);
        playActiveMedia(current);

        if (fromUser) restartAuto();
      }

      function startAuto() {
        if (autoTimer) clearInterval(autoTimer);
        autoTimer = setInterval(() => {
          if (!isPreviewOpen) goTo(current + 1, false);
        }, 4000);
      }
      function stopAuto() {
        if (autoTimer) clearInterval(autoTimer);
        autoTimer = null;
      }
      function restartAuto() {
        stopAuto();
        startAuto();
      }

      startAuto();
      playActiveMedia(0);

      let scrollTimeout = null;
      track.addEventListener('scroll', () => {
        if (isProgrammaticScroll || isPreviewOpen) return;
        if (scrollTimeout) clearTimeout(scrollTimeout);
        scrollTimeout = setTimeout(() => {
          let closestIndex = 0;
          let closestDist = Infinity;
          const trackLeft = track.scrollLeft;
          cards.forEach((card, i) => {
            const dist = Math.abs(card.offsetLeft - trackLeft);
            if (dist < closestDist) {
              closestDist = dist;
              closestIndex = i;
            }
          });
          current = closestIndex;
          updateActive(current);
          playActiveMedia(current);
          restartAuto();
        }, 120);
      });

      // Preview + Thumbs
      function buildThumbs() {
        previewThumbs.innerHTML = '';
        medias.forEach((media, i) => {
          const thumb = document.createElement('div');
          thumb.className = 'preview-thumb' + (i === 0 ? ' active' : '');

          if (media.tagName === 'VIDEO') {
            const v = document.createElement('video');
            v.src = media.src || media.getAttribute('data-src');
            v.muted = true;
            v.playsInline = true;
            v.preload = "metadata";
            v.addEventListener('loadedmetadata', () => {
              try { v.currentTime = 0.05; } catch(e){}
            }, { once: true });
            thumb.appendChild(v);
          } else {
            const im = document.createElement('img');
            im.src = media.src || media.getAttribute('data-src');
            thumb.appendChild(im);
          }

          thumb.addEventListener('click', (e) => {
            e.stopPropagation();
            setPreviewMedia(i, i > previewIndex ? 1 : -1);
          });

          previewThumbs.appendChild(thumb);
        });
      }

      function updateThumbActive(i) {
        const thumbs = Array.from(previewThumbs.querySelectorAll('.preview-thumb'));
        thumbs.forEach((t, idx) => t.classList.toggle('active', idx === i));
        const activeThumb = thumbs[i];
        if (activeThumb) {
          activeThumb.scrollIntoView({ behavior: 'smooth', inline: 'center', block: 'nearest' });
        }
      }

      function openPreview(i) {
        isPreviewOpen = true;
        stopAuto();
        pauseAllVideos(false);

        previewIndex = i;
        if (!previewThumbs.children.length) buildThumbs();
        previewThumbs.style.display = 'flex';

        setPreviewMedia(previewIndex);
        preview.style.display = 'flex';
        document.body.style.overflow = 'hidden';
        updateThumbActive(previewIndex);
      }

      function closePreview() {
        preview.style.display = 'none';
        previewThumbs.style.display = 'none';
        previewMediaBox.innerHTML = '';
        document.body.style.overflow = '';

        isPreviewOpen = false;
        restartAuto();
        playActiveMedia(current);
      }

      function setPreviewMedia(i, dir = 0) {
        if (i < 0) i = medias.length - 1;
        if (i >= medias.length) i = 0;
        previewIndex = i;

        const media = medias[previewIndex];
        const src = media.src || media.getAttribute('data-src');

        previewMediaBox.innerHTML = '';

        if (media.tagName === 'VIDEO') {
          const v = document.createElement('video');
          v.src = src;
          v.controls = true;
          v.autoplay = true;
          v.playsInline = true;
          v.preload = "auto";
          v.style.opacity = '0';
          v.style.transform = `translateX(${dir * 18}px) scale(0.98)`;

          previewMediaBox.appendChild(v);

          v.addEventListener('loadeddata', () => {
            v.style.transition = 'transform 0.25s ease, opacity 0.25s ease';
            v.style.opacity = '1';
            v.style.transform = 'translateX(0) scale(1)';
          }, { once: true });
        } else {
          const im = document.createElement('img');
          im.src = src;
          im.style.opacity = '0';
          im.style.transform = `translateX(${dir * 18}px) scale(0.98)`;
          previewMediaBox.appendChild(im);
          requestAnimationFrame(() => {
            im.style.transition = 'transform 0.25s ease, opacity 0.25s ease';
            im.style.opacity = '1';
            im.style.transform = 'translateX(0) scale(1)';
          });
        }

        updateThumbActive(previewIndex);
      }

      previewClose.addEventListener('click', (e) => {
        e.stopPropagation();
        closePreview();
      });

      preview.addEventListener('click', (e) => {
        if (e.target === preview) closePreview();
      });

      preview.addEventListener('touchstart', (e) => {
        touchStartX = e.changedTouches[0].screenX;
      }, { passive: true });

      preview.addEventListener('touchend', (e) => {
        touchEndX = e.changedTouches[0].screenX;
        const dx = touchEndX - touchStartX;
        if (Math.abs(dx) > 40) {
          if (dx < 0) setPreviewMedia(previewIndex + 1, 1);
          else setPreviewMedia(previewIndex - 1, -1);
        }
      });

      document.addEventListener('keydown', (e) => {
        if (preview.style.display !== 'flex') return;
        if (e.key === 'ArrowRight') setPreviewMedia(previewIndex + 1, 1);
        if (e.key === 'ArrowLeft') setPreviewMedia(previewIndex - 1, -1);
        if (e.key === 'Escape') closePreview();
      });

    })();
  </script>

<script>
  (function () {
    const track = document.getElementById('appGalleryTrack2');
    if (!track) return;

    const cards = Array.from(track.querySelectorAll('.app-gallery-card.second'));
    const medias = cards.map(c => c.querySelector('.gallery-media.second'));
    const dotsBox = document.getElementById('appGalleryDots2');

    const preview = document.getElementById('appGalleryPreview2');
    const previewMediaBox = document.getElementById('appGalleryPreviewMedia2');
    const previewClose = document.getElementById('previewClose2');
    const previewThumbs = document.getElementById('previewThumbs2');

    let current = 0;
    let autoTimer = null;
    let isProgrammaticScroll = false;
    let isPreviewOpen = false;

    let previewIndex = 0;
    let touchStartX = 0;
    let touchEndX = 0;

    // dots
    if (dotsBox){
      cards.forEach((_, i) => {
        const dot = document.createElement('span');
        if (i === 0) dot.classList.add('active');
        dot.addEventListener('click', () => goTo(i, true));
        dotsBox.appendChild(dot);
      });
    }
    const dots = dotsBox ? Array.from(dotsBox.querySelectorAll('span')) : [];

    // lazy load
    const io = 'IntersectionObserver' in window
      ? new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (!entry.isIntersecting) return;
            const card = entry.target;
            const media = card.querySelector('img, video');
            const dataSrc = media.getAttribute('data-src');
            if (dataSrc && !media.src) media.src = dataSrc;

            if (media.tagName === 'VIDEO') {
              media.load();
              media.addEventListener('loadedmetadata', () => {
                try { media.currentTime = 0.05; } catch(e){}
              }, { once: true });
            }

            io.unobserve(card);
          });
        }, { root: track, threshold: 0.2 })
      : null;

    cards.forEach((card) => {
      const media = card.querySelector('img, video');

      if (io) io.observe(card);
      else {
        const dataSrc = media.getAttribute('data-src');
        if (dataSrc && !media.src) media.src = dataSrc;
        if (media.tagName === 'VIDEO') media.load();
      }

      const markLoaded = () => card.classList.add('loaded');
      if (media.tagName === 'VIDEO') {
        media.addEventListener('loadeddata', markLoaded);
        media.addEventListener('error', markLoaded);
      } else {
        if (media.complete && media.naturalWidth !== 0) markLoaded();
        else {
          media.addEventListener('load', markLoaded);
          media.addEventListener('error', markLoaded);
        }
      }

      media.addEventListener('click', (e) => {
        e.stopPropagation();
        if (!media.src) return;
        openPreview(cards.indexOf(card));
      });
    });

    function updateActive(index) {
      cards.forEach((c, i) => c.classList.toggle('active', i === index));
      dots.forEach((d, i) => d.classList.toggle('active', i === index));
    }

    function scrollToCard(index) {
      const card = cards[index];
      if (!card) return;
      const left = card.offsetLeft - track.offsetLeft - 10;
      isProgrammaticScroll = true;
      track.scrollTo({ left, behavior: 'smooth' });
      setTimeout(() => { isProgrammaticScroll = false; }, 450);
    }

    function pauseAllVideos(reset = false) {
      medias.forEach(m => {
        if (m && m.tagName === 'VIDEO') {
          try { m.pause(); } catch(e){}
          if (reset) {
            try { m.currentTime = 0; } catch(e){}
          }
        }
      });
    }

    function ensureVideoSrc(video) {
      if (!video.src) {
        const dataSrc = video.getAttribute('data-src');
        if (dataSrc) {
          video.src = dataSrc;
          video.load();
        }
      }
    }

    function playActiveMedia(index) {
      if (isPreviewOpen) return;
      pauseAllVideos(current);
      const media = medias[index];
      if (!media) return;
      if (media.tagName === 'VIDEO') {
        ensureVideoSrc(media);
        media.muted = true;
        media.playsInline = true;
        media.loop = true;
        const tryPlay = () => {
          const p = media.play();
          if (p && typeof p.catch === 'function') p.catch(()=>{});
        };
        if (media.readyState >= 2) tryPlay();
        else media.addEventListener('canplay', tryPlay, { once: true });
      }
    }

    function goTo(index, fromUser) {
      if (index < 0) index = cards.length - 1;
      if (index >= cards.length) index = 0;
      current = index;
      updateActive(current);
      scrollToCard(current);
      playActiveMedia(current);
      if (fromUser) restartAuto();
    }

    function startAuto() {
      if (autoTimer) clearInterval(autoTimer);
      autoTimer = setInterval(() => {
        if (!isPreviewOpen) goTo(current + 1, false);
      }, 4000);
    }
    function stopAuto() {
      if (autoTimer) clearInterval(autoTimer);
      autoTimer = null;
    }
    function restartAuto() {
      stopAuto();
      startAuto();
    }
    startAuto();
    playActiveMedia(0);

    let scrollTimeout = null;
    track.addEventListener('scroll', () => {
      if (isProgrammaticScroll || isPreviewOpen) return;
      if (scrollTimeout) clearTimeout(scrollTimeout);
      scrollTimeout = setTimeout(() => {
        let closestIndex = 0;
        let closestDist = Infinity;
        const trackLeft = track.scrollLeft;
        cards.forEach((card, i) => {
          const dist = Math.abs(card.offsetLeft - trackLeft);
          if (dist < closestDist) {
            closestDist = dist;
            closestIndex = i;
          }
        });
        current = closestIndex;
        updateActive(current);
        playActiveMedia(current);
        restartAuto();
      }, 120);
    });

    function buildThumbs() {
      previewThumbs.innerHTML = '';
      medias.forEach((media, i) => {
        const thumb = document.createElement('div');
        thumb.className = 'preview-thumb' + (i === 0 ? ' active' : '');
        if (media.tagName === 'VIDEO') {
          const v = document.createElement('video');
          v.src = media.src || media.getAttribute('data-src');
          v.muted = true;
          v.playsInline = true;
          v.preload = "metadata";
          v.addEventListener('loadedmetadata', () => {
            try { v.currentTime = 0.05; } catch(e){}
          }, { once: true });
          thumb.appendChild(v);
        } else {
          const im = document.createElement('img');
          im.src = media.src || media.getAttribute('data-src');
          thumb.appendChild(im);
        }
        thumb.addEventListener('click', (e) => {
          e.stopPropagation();
          setPreviewMedia(i, i > previewIndex ? 1 : -1);
        });
        previewThumbs.appendChild(thumb);
      });
    }

    function updateThumbActive(i) {
      const thumbs = Array.from(previewThumbs.querySelectorAll('.preview-thumb'));
      thumbs.forEach((t, idx) => t.classList.toggle('active', idx === i));
      const activeThumb = thumbs[i];
      if (activeThumb) {
        activeThumb.scrollIntoView({ behavior: 'smooth', inline: 'center', block: 'nearest' });
      }
    }

    function openPreview(i) {
      isPreviewOpen = true;
      stopAuto();
      pauseAllVideos(false);
      previewIndex = i;
      if (!previewThumbs.children.length) buildThumbs();
      previewThumbs.style.display = 'flex';
      setPreviewMedia(previewIndex);
      preview.style.display = 'flex';
      document.body.style.overflow = 'hidden';
      updateThumbActive(previewIndex);
    }

    function closePreview() {
      preview.style.display = 'none';
      previewThumbs.style.display = 'none';
      previewMediaBox.innerHTML = '';
      document.body.style.overflow = '';
      isPreviewOpen = false;
      restartAuto();
      playActiveMedia(current);
    }

    function setPreviewMedia(i, dir = 0) {
      if (i < 0) i = medias.length - 1;
      if (i >= medias.length) i = 0;
      previewIndex = i;
      const media = medias[previewIndex];
      const src = media.src || media.getAttribute('data-src');
      previewMediaBox.innerHTML = '';
      if (media.tagName === 'VIDEO') {
        const v = document.createElement('video');
        v.src = src;
        v.controls = true;
        v.autoplay = true;
        v.playsInline = true;
        v.preload = "auto";
        v.style.opacity = '0';
        v.style.transform = `translateX(${dir * 18}px) scale(0.98)`;
        previewMediaBox.appendChild(v);
        v.addEventListener('loadeddata', () => {
          v.style.transition = 'transform 0.25s ease, opacity 0.25s ease';
          v.style.opacity = '1';
          v.style.transform = 'translateX(0) scale(1)';
        }, { once: true });
      } else {
        const im = document.createElement('img');
        im.src = src;
        im.style.opacity = '0';
        im.style.transform = `translateX(${dir * 18}px) scale(0.98)`;
        previewMediaBox.appendChild(im);
        requestAnimationFrame(() => {
          im.style.transition = 'transform 0.25s ease, opacity 0.25s ease';
          im.style.opacity = '1';
          im.style.transform = 'translateX(0) scale(1)';
        });
      }
      updateThumbActive(previewIndex);
    }

    previewClose.addEventListener('click', (e) => {
      e.stopPropagation();
      closePreview();
    });

    preview.addEventListener('click', (e) => {
      if (e.target === preview) closePreview();
    });

    preview.addEventListener('touchstart', (e) => {
      touchStartX = e.changedTouches[0].screenX;
    }, { passive: true });

    preview.addEventListener('touchend', (e) => {
      touchEndX = e.changedTouches[0].screenX;
      const dx = touchEndX - touchStartX;
      if (Math.abs(dx) > 40) {
        if (dx < 0) setPreviewMedia(previewIndex + 1, 1);
        else setPreviewMedia(previewIndex - 1, -1);
      }
    });

    document.addEventListener('keydown', (e) => {
      if (preview.style.display !== 'flex') return;
      if (e.key === 'ArrowRight') setPreviewMedia(previewIndex + 1, 1);
      if (e.key === 'ArrowLeft') setPreviewMedia(previewIndex - 1, -1);
      if (e.key === 'Escape') closePreview();
    });
  })();
</script>

<script>
  (function(){
    const introBox = document.getElementById('introBox');
    const introToggle = document.getElementById('introToggle');
    if (!introBox || !introToggle) return;

    introToggle.addEventListener('click', () => {
      const isCollapsed = introBox.classList.toggle('intro-collapsed');
      introToggle.textContent = isCollapsed ? "æ›´å¤š" : "æ”¶åˆ";
    });
  })();
</script>
<script>
  (function setReviewDates(){
    const els = document.querySelectorAll('.review-date[data-offset]');
    if (!els.length) return;
    const now = new Date();
    els.forEach(el=>{
      const off = parseInt(el.getAttribute('data-offset'),10)||0;
      const d = new Date(now);
      d.setDate(now.getDate()-off);
      const mm = String(d.getMonth()+1).padStart(2,'0');
      const dd = String(d.getDate()).padStart(2,'0');
      el.textContent = `${mm}-${dd}`;
    });
  })();
</script>
</body>
</html>
